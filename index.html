<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>Final Tutorial</title>
  <style>
    html {
      line-height: 1.5;
      font-family: Georgia, serif;
      font-size: 20px;
      color: #1a1a1a;
      background-color: #fdfdfd;
    }
    body {
      margin: 0 auto;
      max-width: 36em;
      padding-left: 50px;
      padding-right: 50px;
      padding-top: 50px;
      padding-bottom: 50px;
      hyphens: auto;
      overflow-wrap: break-word;
      text-rendering: optimizeLegibility;
      font-kerning: normal;
    }
    @media (max-width: 600px) {
      body {
        font-size: 0.9em;
        padding: 1em;
      }
      h1 {
        font-size: 1.8em;
      }
    }
    @media print {
      body {
        background-color: transparent;
        color: black;
        font-size: 12pt;
      }
      p, h2, h3 {
        orphans: 3;
        widows: 3;
      }
      h2, h3, h4 {
        page-break-after: avoid;
      }
    }
    p {
      margin: 1em 0;
    }
    a {
      color: #1a1a1a;
    }
    a:visited {
      color: #1a1a1a;
    }
    img {
      max-width: 100%;
    }
    h1, h2, h3, h4, h5, h6 {
      margin-top: 1.4em;
    }
    h5, h6 {
      font-size: 1em;
      font-style: italic;
    }
    h6 {
      font-weight: normal;
    }
    ol, ul {
      padding-left: 1.7em;
      margin-top: 1em;
    }
    li > ol, li > ul {
      margin-top: 0;
    }
    blockquote {
      margin: 1em 0 1em 1.7em;
      padding-left: 1em;
      border-left: 2px solid #e6e6e6;
      color: #606060;
    }
    code {
      font-family: Menlo, Monaco, 'Lucida Console', Consolas, monospace;
      font-size: 85%;
      margin: 0;
    }
    pre {
      margin: 1em 0;
      overflow: auto;
    }
    pre code {
      padding: 0;
      overflow: visible;
      overflow-wrap: normal;
    }
    .sourceCode {
     background-color: transparent;
     overflow: visible;
    }
    hr {
      background-color: #1a1a1a;
      border: none;
      height: 1px;
      margin: 1em 0;
    }
    table {
      margin: 1em 0;
      border-collapse: collapse;
      width: 100%;
      overflow-x: auto;
      display: block;
      font-variant-numeric: lining-nums tabular-nums;
    }
    table caption {
      margin-bottom: 0.75em;
    }
    tbody {
      margin-top: 0.5em;
      border-top: 1px solid #1a1a1a;
      border-bottom: 1px solid #1a1a1a;
    }
    th {
      border-top: 1px solid #1a1a1a;
      padding: 0.25em 0.5em 0.25em 0.5em;
    }
    td {
      padding: 0.125em 0.5em 0.25em 0.5em;
    }
    header {
      margin-bottom: 4em;
      text-align: center;
    }
    #TOC li {
      list-style: none;
    }
    #TOC ul {
      padding-left: 1.3em;
    }
    #TOC > ul {
      padding-left: 0;
    }
    #TOC a:not(:hover) {
      text-decoration: none;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
  </style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<section id="ucl-coefficient-predictor" class="cell markdown"
id="SROYeTM8Zo5F">
<h1><strong>UCL Coefficient Predictor</strong></h1>
<p>Collaborators: Archit Shankar, Iris Guo, Justenn Wang</p>
<hr />
</section>
<section id="introduction" class="cell markdown" id="JWqcfxpFac5p">
<h2><strong>Introduction</strong></h2>
<p>Soccer, known as football in some parts of the world, is more than
just a sport; it is a global phenomenon that unites millions of fans
through its thrilling matches and historic tournaments. Among these
tournaments, the UEFA Champions League stands out as one of the most
prestigious and fiercely contested competitions. Predicting the winner
of such a high-stakes event is not only a fascinating challenge but also
one that has significant implications for fans, clubs, and the sports
betting industry.</p>
<h3
id="why-is-predicting-uefa-champions-league-coefficients-important">Why
is Predicting UEFA Champions League Coefficients Important?</h3>
<p>Sports predictions, particularly for high-profile events like the
UEFA Champions League, hold immense importance. Accurate predictions can
influence betting markets, enhance fan engagement, and provide strategic
insights for clubs and analysts. Beyond the excitement of guessing the
winner, predicting outcomes in sports involves analyzing vast amounts of
data and identifying patterns, which is a perfect application of data
science.</p>
<p>In recent years, the use of machine learning in sports analytics has
grown tremendously. By leveraging historical data and advanced
algorithms, we can uncover the factors that contribute to a team's
success and build models that predict future outcomes with impressive
accuracy. This project will take you through the entire data science
pipeline to create a machine learning model, specifically a decision
tree, to predict UEFA Champions League winners.</p>
<h3 id="objective">Objective</h3>
<p>The main goal of this project is to develop a decision tree model to
predict the winners of the UEFA Champions League. We will guide you
through each step of the data science lifecycle, from data collection
and preprocessing to exploratory data analysis (EDA), model training,
and evaluation. By the end of this tutorial, you will have a
comprehensive understanding of the processes involved in building a
predictive model and the factors that influence the outcomes of football
matches.</p>
<p>Over this tutorial we will be going through the Data Science
Lifecycle</p>
</section>
<section id="data-collection" class="cell markdown" id="YrJKn9PjajIX">
<h2><strong>Data Collection</strong></h2>
<p>We will collect data to eventually gain the following information
about teams that we are looking at:</p>
<ul>
<li><p>All time club rankings</p></li>
<li><p>Soccer power index rankings</p></li>
<li><p>UEFA Coefficients over the past 5 years</p></li>
<li><p>Net transfer spend over the past 5 years</p></li>
<li><p>Net market value of players on a given team over the past 5
years</p></li>
</ul>
<p>During this project, we will be using Python language, and we use
tools such as Jupyter Notebook to develop this project. Heres some more
information on how Jupyter notbook <a
href="https://jupyter.org/">works</a></p>
<p>We will also need to import some libraries:</p>
</section>
<div class="cell code" data-execution_count="2" id="FBaQEwbNfRPx">
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> warnings</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> datetime</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> requests</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> bs4 <span class="im">import</span> BeautifulSoup <span class="im">as</span> bs</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.model_selection <span class="im">import</span> train_test_split, GridSearchCV</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.ensemble <span class="im">import</span> GradientBoostingRegressor</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.linear_model <span class="im">import</span> LinearRegression</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.metrics <span class="im">import</span> mean_squared_error, r2_score</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> StandardScaler, OneHotEncoder</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.compose <span class="im">import</span> ColumnTransformer</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.pipeline <span class="im">import</span> Pipeline</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.impute <span class="im">import</span> SimpleImputer</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> sklearn.preprocessing <span class="im">import</span> MinMaxScaler</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/4237753902.py:5: DeprecationWarning: 
Pyarrow will become a required dependency of pandas in the next major release of pandas (pandas 3.0),
(to allow more performant data types, such as the Arrow string type, and better interoperability with other libraries)
but was not found to be installed on your system.
If this would cause problems for you,
please provide us feedback at https://github.com/pandas-dev/pandas/issues/54466
        
  import pandas as pd
</code></pre>
</div>
</div>
<div class="cell markdown" id="_yamXcSJgH5H">
<p>One of the main libraries that we will be using throughout this
project is Pandas. <a
href="https://shahsean.github.io/#https://pandas.pydata.org/">Pandas</a>
is an open-source data analysis tool that was built on top of the Python
programming language and it is going to help us manipulate the data in
an easy and flexible way. With the vast library of tools available, you
can transform data very easily as you will see below.</p>
<p>Another library that helps maximize efficiency is <a
href="https://shahsean.github.io/#https://numpy.org/">NumPy</a>. This
library allows for easy computation for large datasets and it is another
way to store and manipulate information.</p>
</div>
<div class="cell markdown">
<p>We will also need to download Selenium and use webdrivers to scrape
data. Run</p>
</div>
<div class="cell code" data-execution_count="5">
<div class="sourceCode" id="cb3"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#sudo pip3 install selenium</span></span></code></pre></div>
</div>
<div class="cell markdown">
<p>More information about selenium can be found on this link: <a
href="https://www.selenium.dev/"
class="uri">https://www.selenium.dev/</a></p>
<p>Then import the following:</p>
</div>
<div class="cell code" data-execution_count="6">
<div class="sourceCode" id="cb4"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium <span class="im">import</span> webdriver</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.by <span class="im">import</span> By</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> selenium.webdriver.common.keys <span class="im">import</span> Keys</span></code></pre></div>
</div>
<div class="cell markdown">
<p>To get an idea of where we want to begin, we decided to look at the
historic strength of teams in the Champions League. We were able to find
a Kaggle dataset that contained all-time stats from teams in the
champions league. This dataset can be found at the following link: <a
href="https://www.kaggle.com/datasets/basharalkuwaiti/champions-league-era-stats"
class="uri">https://www.kaggle.com/datasets/basharalkuwaiti/champions-league-era-stats</a></p>
</div>
<div class="cell code" data-execution_count="7"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:423}"
id="M0zo8vRasr8K" data-outputId="9b0ee85f-e45f-4097-fa6e-08c454ee50b7">
<div class="sourceCode" id="cb5"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>rank <span class="op">=</span> pd.read_csv(<span class="st">&quot;AllTimeRankingByClub.csv&quot;</span>, encoding<span class="op">=</span><span class="st">&#39;UTF-16&#39;</span>)</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>rank.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="7">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Position</th>
      <th>Club</th>
      <th>Country</th>
      <th>Participated</th>
      <th>Titles</th>
      <th>Played</th>
      <th>Win</th>
      <th>Draw</th>
      <th>Loss</th>
      <th>Goals For</th>
      <th>Goals Against</th>
      <th>Pts</th>
      <th>Goal Diff</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>Real Madrid CF</td>
      <td>ESP</td>
      <td>53</td>
      <td>14</td>
      <td>476</td>
      <td>285</td>
      <td>81</td>
      <td>110</td>
      <td>1047</td>
      <td>521.0</td>
      <td>651.0</td>
      <td>526.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>FC Bayern München</td>
      <td>GER</td>
      <td>39</td>
      <td>6</td>
      <td>382</td>
      <td>229</td>
      <td>76</td>
      <td>77</td>
      <td>804</td>
      <td>373.0</td>
      <td>534.0</td>
      <td>431.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>FC Barcelona</td>
      <td>ESP</td>
      <td>33</td>
      <td>5</td>
      <td>339</td>
      <td>197</td>
      <td>76</td>
      <td>66</td>
      <td>667</td>
      <td>343.0</td>
      <td>470.0</td>
      <td>324.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>Manchester United</td>
      <td>ENG</td>
      <td>30</td>
      <td>3</td>
      <td>293</td>
      <td>160</td>
      <td>69</td>
      <td>64</td>
      <td>533</td>
      <td>284.0</td>
      <td>389.0</td>
      <td>249.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>Juventus</td>
      <td>ITA</td>
      <td>37</td>
      <td>2</td>
      <td>301</td>
      <td>153</td>
      <td>70</td>
      <td>78</td>
      <td>479</td>
      <td>301.0</td>
      <td>376.0</td>
      <td>178.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Next, we decided to investigate the SPI of different clubs. SPI
stands for Soccer Power Index, and is an indicator of club strength
given by fivethirtyeight.com. The link can be found as follows: <a
href="https://projects.fivethirtyeight.com/soccer-predictions/global-club-rankings/"
class="uri">https://projects.fivethirtyeight.com/soccer-predictions/global-club-rankings/</a></p>
<p>We believe that global power rankings are a strong indicator of
tournament success in the UCL, and thus decided to consider it in our
model.</p>
</div>
<div class="cell code" data-execution_count="8"
data-colab="{&quot;base_uri&quot;:&quot;https://localhost:8080/&quot;,&quot;height&quot;:423}"
id="hKdu5acoxdP1" data-outputId="c0c43f3d-b54b-415a-f542-8335919aeb13">
<div class="sourceCode" id="cb6"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>spi <span class="op">=</span> pd.read_csv(<span class="st">&quot;spi_global_rankings.csv&quot;</span>, encoding<span class="op">=</span><span class="st">&#39;UTF-8&#39;</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>spi.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="8">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>rank</th>
      <th>prev_rank</th>
      <th>name</th>
      <th>league</th>
      <th>off</th>
      <th>def</th>
      <th>spi</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Manchester City</td>
      <td>Barclays Premier League</td>
      <td>2.79</td>
      <td>0.28</td>
      <td>92.00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>Bayern Munich</td>
      <td>German Bundesliga</td>
      <td>3.04</td>
      <td>0.68</td>
      <td>87.66</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>3</td>
      <td>Barcelona</td>
      <td>Spanish Primera Division</td>
      <td>2.45</td>
      <td>0.43</td>
      <td>86.40</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>4</td>
      <td>Real Madrid</td>
      <td>Spanish Primera Division</td>
      <td>2.56</td>
      <td>0.60</td>
      <td>84.41</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>5</td>
      <td>Liverpool</td>
      <td>Barclays Premier League</td>
      <td>2.63</td>
      <td>0.67</td>
      <td>83.93</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="qXJsDWeJRG_P">
<p>Next, we decided that the value of a team in the Champions League
could be correlated to their success. Teams that are more wealthy and
invest more into their players are more likely to have both better
players, facilities, and coaches. Thus, we decided to find data that
gave us the market worth of all players on a team. To do this, we
decided to use transfermarkt, which is a reputable German soccer source
that deals with events like transfer rumors. The official transfermarkt
website is as follows: <a
href="https://www.transfermarkt.com/premier-league/startseite/wettbewerb/GB1"
class="uri">https://www.transfermarkt.com/premier-league/startseite/wettbewerb/GB1</a></p>
<p>Because many things can change a soccer team even by the season, we
decided to simply use the last 5 seasons for data regarding net market
value of a team. In our model, more recent years are weighted the
heaviest, while further back years are weighted lighter. The following
code segments all serve to extract the net value of the players on
different teams for the past 5 years, starting with the 2023-2024
season.</p>
</div>
<div class="cell code" data-execution_count="9" id="d9MM0iHIzqUp">
<div class="sourceCode" id="cb7"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">#This is the data for 2023-2024 Season</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/uefa-champions-league/teilnehmer/pokalwettbewerb/CL/saison_id/2023&#39;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>twentythree <span class="op">=</span> pd.concat(table)</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>twentythree.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/4165066953.py:17: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="9">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>23/2423/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>27.3</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Borussia Dortmund</td>
      <td>29.0</td>
      <td>25.5</td>
      <td>€463.70m</td>
      <td>€15.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>26.9</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Arsenal FC</td>
      <td>25.0</td>
      <td>25.7</td>
      <td>€1.12bn</td>
      <td>€44.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>30.0</td>
      <td>25.4</td>
      <td>€1.02bn</td>
      <td>€33.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>27.0</td>
      <td>26.8</td>
      <td>€929.45m</td>
      <td>€34.42m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>26.0</td>
      <td>25.1</td>
      <td>€839.50m</td>
      <td>€32.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>26.0</td>
      <td>26.8</td>
      <td>€730.25m</td>
      <td>€28.09m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Newcastle United</td>
      <td>28.0</td>
      <td>27.6</td>
      <td>€637.70m</td>
      <td>€22.78m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net value of players for different
teams for the 2022-2023 season.</p>
</div>
<div class="cell code" data-execution_count="10" id="FupJ16_XwLmu">
<div class="sourceCode" id="cb9"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/uefa-champions-league/teilnehmer/pokalwettbewerb/CL/saison_id/2022&#39;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>twentytwo <span class="op">=</span> pd.concat(table)</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>twentytwo.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/2543189557.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="10">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>22/2323/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>25.5</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>25.4</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>30.0</td>
      <td>25.5</td>
      <td>€1.02bn</td>
      <td>€33.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>27.0</td>
      <td>25.3</td>
      <td>€929.45m</td>
      <td>€34.42m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>30.0</td>
      <td>24.7</td>
      <td>€928.30m</td>
      <td>€30.94m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Liverpool FC</td>
      <td>28.0</td>
      <td>25.1</td>
      <td>€921.40m</td>
      <td>€32.91m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>26.0</td>
      <td>24.0</td>
      <td>€839.50m</td>
      <td>€32.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>26.0</td>
      <td>25.4</td>
      <td>€777.30m</td>
      <td>€29.90m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>25.0</td>
      <td>26.4</td>
      <td>€622.35m</td>
      <td>€24.89m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net value of players for different
teams for the 2021-2022 season.</p>
</div>
<div class="cell code" data-execution_count="11" id="XZX9-QxJwXeT">
<div class="sourceCode" id="cb11"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/uefa-champions-league/teilnehmer/pokalwettbewerb/CL/saison_id/2021&#39;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>twentyone <span class="op">=</span> pd.concat(table)</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>twentyone.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/1316040077.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="11">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>21/2223/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>24.3</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>25.7</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>30.0</td>
      <td>25.7</td>
      <td>€1.02bn</td>
      <td>€33.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>27.0</td>
      <td>24.7</td>
      <td>€929.45m</td>
      <td>€34.42m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>30.0</td>
      <td>25.1</td>
      <td>€928.30m</td>
      <td>€30.94m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Liverpool FC</td>
      <td>28.0</td>
      <td>24.0</td>
      <td>€921.40m</td>
      <td>€32.91m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>26.0</td>
      <td>25.1</td>
      <td>€839.50m</td>
      <td>€32.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>26.0</td>
      <td>25.5</td>
      <td>€730.25m</td>
      <td>€28.09m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>25.0</td>
      <td>27.2</td>
      <td>€622.35m</td>
      <td>€24.89m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net value of players for different
teams for the 2020-2021 season.</p>
</div>
<div class="cell code" data-execution_count="12" id="SZZEIeouwkpl">
<div class="sourceCode" id="cb13"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/uefa-champions-league/teilnehmer/pokalwettbewerb/CL/saison_id/2020&#39;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>twenty <span class="op">=</span> pd.concat(table)</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>twenty.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/1042087757.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="12">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>20/2123/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>24.9</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>24.8</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>30.0</td>
      <td>24.2</td>
      <td>€1.02bn</td>
      <td>€33.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>27.0</td>
      <td>23.9</td>
      <td>€929.45m</td>
      <td>€34.42m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>30.0</td>
      <td>25.2</td>
      <td>€928.30m</td>
      <td>€30.94m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Liverpool FC</td>
      <td>28.0</td>
      <td>24.4</td>
      <td>€921.40m</td>
      <td>€32.91m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>26.0</td>
      <td>25.1</td>
      <td>€839.50m</td>
      <td>€32.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>26.0</td>
      <td>24.9</td>
      <td>€730.25m</td>
      <td>€28.09m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>25.0</td>
      <td>25.2</td>
      <td>€622.35m</td>
      <td>€24.89m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net value of players for different
teams for the 2019-2020 season.</p>
</div>
<div class="cell code" data-execution_count="13" id="P6o2h_gzw2LL">
<div class="sourceCode" id="cb15"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/uefa-champions-league/teilnehmer/pokalwettbewerb/CL/saison_id/2019&#39;</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>nineteen <span class="op">=</span> pd.concat(table)</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>nineteen.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/2004943268.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="13">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>19/2023/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>0</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>25.1</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>25.6</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>30.0</td>
      <td>25.2</td>
      <td>€1.02bn</td>
      <td>€33.99m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>27.0</td>
      <td>23.7</td>
      <td>€929.45m</td>
      <td>€34.42m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>30.0</td>
      <td>24.1</td>
      <td>€928.30m</td>
      <td>€30.94m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Liverpool FC</td>
      <td>28.0</td>
      <td>23.3</td>
      <td>€921.40m</td>
      <td>€32.91m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>26.0</td>
      <td>24.2</td>
      <td>€839.50m</td>
      <td>€32.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>26.0</td>
      <td>24.8</td>
      <td>€777.30m</td>
      <td>€29.90m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>25.0</td>
      <td>26.7</td>
      <td>€622.35m</td>
      <td>€24.89m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Next, we decided to look at net transfer spend. While the overall
market value of players on a team is an indicator of the team strength,
the net transfer spend is also an indicator that gives more insight into
the yearly outcome of a soccer club. For example, a team that spends
more on transfer arrivals is more likely to have a better club, while a
team that loses many players on transfer departures might see their
level fall. Again, we are using the transfermarkt website to retrieve
this data, and similarly, we will be collecting this data for teams from
the past 5 years.</p>
<p>The following code extracts the net market spend for different teams
for the 2023-2024 season.</p>
</div>
<div class="cell code" data-execution_count="14" id="U8-EEf5MHyb-">
<div class="sourceCode" id="cb17"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2023&amp;saison_id_bis=2023&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>nts23 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>nts23.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/2103040352.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="14">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€467.80m</td>
      <td>29</td>
      <td>€269.50m</td>
      <td>31</td>
      <td>€-198.30m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>€454.50m</td>
      <td>33</td>
      <td>€207.50m</td>
      <td>31</td>
      <td>€-247.00m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Al-Hilal SFC</td>
      <td>€376.10m</td>
      <td>19</td>
      <td>€1.38m</td>
      <td>22</td>
      <td>€-374.72m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>€272.10m</td>
      <td>27</td>
      <td>€120.70m</td>
      <td>22</td>
      <td>€-151.40m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>€259.60m</td>
      <td>17</td>
      <td>€125.80m</td>
      <td>20</td>
      <td>€-133.80m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>Arsenal FC</td>
      <td>€234.94m</td>
      <td>15</td>
      <td>€69.20m</td>
      <td>16</td>
      <td>€-165.74m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>€202.30m</td>
      <td>15</td>
      <td>€58.34m</td>
      <td>24</td>
      <td>€-143.96m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>Bayern Munich</td>
      <td>€187.50m</td>
      <td>16</td>
      <td>€173.25m</td>
      <td>17</td>
      <td>€-14.25m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>Al-Ahli SFC</td>
      <td>€184.10m</td>
      <td>28</td>
      <td>€1.74m</td>
      <td>30</td>
      <td>€-182.35m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>RB Leipzig</td>
      <td>€179.50m</td>
      <td>24</td>
      <td>€243.70m</td>
      <td>27</td>
      <td>€64.20m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net market spend for different teams
for the 2022-2023 season.</p>
</div>
<div class="cell code" data-execution_count="15" id="lvVJweGIIfXC">
<div class="sourceCode" id="cb19"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2022&amp;saison_id_bis=2022&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>nts22 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>nts22.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/21753371.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="15">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€630.35m</td>
      <td>26</td>
      <td>€67.86m</td>
      <td>24</td>
      <td>€-562.49m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>€243.28m</td>
      <td>24</td>
      <td>€23.65m</td>
      <td>19</td>
      <td>€-219.63m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Nottingham Forest</td>
      <td>€194.55m</td>
      <td>42</td>
      <td>€5.00m</td>
      <td>26</td>
      <td>€-189.55m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>West Ham United</td>
      <td>€186.60m</td>
      <td>12</td>
      <td>€21.55m</td>
      <td>13</td>
      <td>€-165.05m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Arsenal FC</td>
      <td>€186.40m</td>
      <td>25</td>
      <td>€23.80m</td>
      <td>18</td>
      <td>€-162.60m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>Newcastle United</td>
      <td>€185.35m</td>
      <td>17</td>
      <td>€14.06m</td>
      <td>13</td>
      <td>€-171.29m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>€179.90m</td>
      <td>15</td>
      <td>€38.75m</td>
      <td>14</td>
      <td>€-141.15m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>Wolverhampton Wanderers</td>
      <td>€177.11m</td>
      <td>32</td>
      <td>€62.87m</td>
      <td>28</td>
      <td>€-114.24m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>€158.00m</td>
      <td>16</td>
      <td>€39.50m</td>
      <td>22</td>
      <td>€-118.50m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>Leeds United</td>
      <td>€157.39m</td>
      <td>25</td>
      <td>€114.50m</td>
      <td>19</td>
      <td>€-42.89m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net market spend for different teams
for the 2021-2022 season.</p>
</div>
<div class="cell code" data-execution_count="16" id="WX63tLo6I-5i">
<div class="sourceCode" id="cb21"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2021&amp;saison_id_bis=2021&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>nts21 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>nts21.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/2872304125.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="16">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Arsenal FC</td>
      <td>€167.40m</td>
      <td>13</td>
      <td>€31.40m</td>
      <td>20</td>
      <td>€-136.00m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>€142.00m</td>
      <td>16</td>
      <td>€31.10m</td>
      <td>14</td>
      <td>€-110.90m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Juventus FC</td>
      <td>€141.65m</td>
      <td>20</td>
      <td>€64.03m</td>
      <td>18</td>
      <td>€-77.62m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>€138.90m</td>
      <td>21</td>
      <td>€93.80m</td>
      <td>24</td>
      <td>€-45.10m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>AS Roma</td>
      <td>€132.05m</td>
      <td>38</td>
      <td>€17.24m</td>
      <td>39</td>
      <td>€-114.82m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>Newcastle United</td>
      <td>€130.50m</td>
      <td>12</td>
      <td>-</td>
      <td>10</td>
      <td>€-130.50m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>Aston Villa</td>
      <td>€129.80m</td>
      <td>22</td>
      <td>€127.00m</td>
      <td>18</td>
      <td>€-2.80m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>RB Leipzig</td>
      <td>€125.62m</td>
      <td>18</td>
      <td>€113.50m</td>
      <td>20</td>
      <td>€-12.12m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€118.00m</td>
      <td>21</td>
      <td>€154.69m</td>
      <td>23</td>
      <td>€36.69m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>AC Milan</td>
      <td>€100.36m</td>
      <td>28</td>
      <td>€5.12m</td>
      <td>27</td>
      <td>€-95.24m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net market spend for different teams
for the 2020-2021 season.</p>
</div>
<div class="cell code" data-execution_count="17" id="97-Q3DBYJNyt">
<div class="sourceCode" id="cb23"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2020&amp;saison_id_bis=2020&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a>nts20 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>nts20.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/2361568598.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="17">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€247.20m</td>
      <td>31</td>
      <td>€57.15m</td>
      <td>26</td>
      <td>€-190.05m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>€173.40m</td>
      <td>28</td>
      <td>€64.00m</td>
      <td>27</td>
      <td>€-109.40m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Juventus FC</td>
      <td>€162.81m</td>
      <td>20</td>
      <td>€110.31m</td>
      <td>20</td>
      <td>€-52.50m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>Leeds United</td>
      <td>€127.80m</td>
      <td>16</td>
      <td>-</td>
      <td>17</td>
      <td>€-127.80m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>€126.50m</td>
      <td>35</td>
      <td>€82.95m</td>
      <td>41</td>
      <td>€-43.55m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>SL Benfica</td>
      <td>€115.00m</td>
      <td>28</td>
      <td>€81.72m</td>
      <td>27</td>
      <td>€-33.28m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>€111.94m</td>
      <td>18</td>
      <td>€154.40m</td>
      <td>15</td>
      <td>€42.46m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>€110.50m</td>
      <td>15</td>
      <td>€13.30m</td>
      <td>11</td>
      <td>€-97.20m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>Parma Calcio 1913</td>
      <td>€102.33m</td>
      <td>58</td>
      <td>€4.00m</td>
      <td>51</td>
      <td>€-98.33m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>Aston Villa</td>
      <td>€101.35m</td>
      <td>12</td>
      <td>€2.77m</td>
      <td>15</td>
      <td>€-98.58m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net market spend for different teams
for the 2019-2020 season.</p>
</div>
<div class="cell code" data-execution_count="18" id="fp_cITkzJa6s">
<div class="sourceCode" id="cb25"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2019&amp;saison_id_bis=2019&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>nts19 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>nts19.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/3106206303.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="18">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>€361.30m</td>
      <td>23</td>
      <td>€136.80m</td>
      <td>22</td>
      <td>€-224.50m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>€303.00m</td>
      <td>22</td>
      <td>€154.40m</td>
      <td>23</td>
      <td>€-148.60m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Atlético de Madrid</td>
      <td>€247.35m</td>
      <td>20</td>
      <td>€316.30m</td>
      <td>19</td>
      <td>€68.95m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>Manchester United</td>
      <td>€236.80m</td>
      <td>13</td>
      <td>€81.18m</td>
      <td>12</td>
      <td>€-155.62m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Juventus FC</td>
      <td>€235.30m</td>
      <td>23</td>
      <td>€203.14m</td>
      <td>24</td>
      <td>€-32.16m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>SSC Napoli</td>
      <td>€210.02m</td>
      <td>47</td>
      <td>€48.72m</td>
      <td>43</td>
      <td>€-161.30m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>AS Monaco</td>
      <td>€200.00m</td>
      <td>33</td>
      <td>€83.75m</td>
      <td>39</td>
      <td>€-116.25m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>Inter Milan</td>
      <td>€192.02m</td>
      <td>51</td>
      <td>€66.74m</td>
      <td>48</td>
      <td>€-125.28m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>Sevilla FC</td>
      <td>€188.73m</td>
      <td>30</td>
      <td>€131.40m</td>
      <td>33</td>
      <td>€-57.33m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>€169.82m</td>
      <td>25</td>
      <td>€71.00m</td>
      <td>26</td>
      <td>€-98.82m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>The following code extracts the net market spend for different teams
for the 2018-2019 season.</p>
</div>
<div class="cell code" data-execution_count="19" id="nunKINcWJw5S">
<div class="sourceCode" id="cb27"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># URL of the webpage to scrape</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://www.transfermarkt.us/transfers/einnahmenausgaben/statistik/plus/0?ids=a&amp;sa=&amp;saison_id=2018&amp;saison_id_bis=2018&amp;land_id=&amp;nat=&amp;kontinent_id=&amp;pos=&amp;altersklasse=&amp;w_s=&amp;leihe=&amp;intern=0&amp;plus=0&#39;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the WebDriver (ensure the path to the chromedriver is correct)</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>driver <span class="op">=</span> webdriver.Chrome()</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Open the URL</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>driver.get(url)</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the page source after JavaScript has rendered</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>html <span class="op">=</span> driver.page_source</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Parse the HTML content using BeautifulSoup</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(html, <span class="st">&#39;html.parser&#39;</span>)</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>table <span class="op">=</span> pd.read_html(html)</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>nts18 <span class="op">=</span> table[<span class="dv">1</span>]</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>nts18.head(<span class="dv">10</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/1999395064.py:15: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  table = pd.read_html(html)
</code></pre>
</div>
<div class="output execute_result" data-execution_count="19">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Juventus FC</td>
      <td>€265.30m</td>
      <td>41</td>
      <td>€112.54m</td>
      <td>35</td>
      <td>€-152.76m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>€262.00m</td>
      <td>21</td>
      <td>€114.00m</td>
      <td>18</td>
      <td>€-148.00m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€208.80m</td>
      <td>30</td>
      <td>€83.25m</td>
      <td>31</td>
      <td>€-125.55m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>AC Milan</td>
      <td>€194.64m</td>
      <td>26</td>
      <td>€88.10m</td>
      <td>28</td>
      <td>€-106.54m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Liverpool FC</td>
      <td>€182.20m</td>
      <td>18</td>
      <td>€41.32m</td>
      <td>21</td>
      <td>€-140.88m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>6</td>
      <td>NaN</td>
      <td>Atlético de Madrid</td>
      <td>€168.00m</td>
      <td>22</td>
      <td>€57.90m</td>
      <td>19</td>
      <td>€-110.10m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>6</th>
      <td>7</td>
      <td>NaN</td>
      <td>AS Roma</td>
      <td>€166.35m</td>
      <td>45</td>
      <td>€150.47m</td>
      <td>46</td>
      <td>€-15.88m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>8</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>€164.75m</td>
      <td>16</td>
      <td>€136.10m</td>
      <td>14</td>
      <td>€-28.65m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>9</td>
      <td>NaN</td>
      <td>AS Monaco</td>
      <td>€145.85m</td>
      <td>37</td>
      <td>€367.25m</td>
      <td>29</td>
      <td>€221.40m</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>10</td>
      <td>NaN</td>
      <td>FC Barcelona</td>
      <td>€141.10m</td>
      <td>19</td>
      <td>€146.05m</td>
      <td>19</td>
      <td>€4.95m</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="AJGf_Y6aTq0x">
<p>Now, we are going to gather Uefa club coefficient rankings. These
rankings come from UEFA themselves, and rank European teams based on
their performance over the past years. This coefficient also determines
seeding in the tournament's draws. Because these rankings are
essentially a model that determine team strength, we think it is a
strong indicator of those teams' performance in the Champions League. To
find the table shown below, go to <a
href="https://en.wikipedia.org/wiki/UEFA_coefficient#Men&#39;s_club_coefficient"
class="uri">https://en.wikipedia.org/wiki/UEFA_coefficient#Men's_club_coefficient</a>
and scroll down to the "Current Club Ranking" header. The table below is
the table under that header.</p>
</div>
<div class="cell code" data-execution_count="20">
<div class="sourceCode" id="cb29"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> <span class="st">&#39;https://en.wikipedia.org/wiki/UEFA_coefficient#Men</span><span class="ch">\&#39;</span><span class="st">s_club_coefficient&#39;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>response <span class="op">=</span> requests.get(url)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>soup <span class="op">=</span> bs(response.content, <span class="st">&quot;html.parser&quot;</span>)</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> soup.find_all(<span class="st">&#39;table&#39;</span>)</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>selected_table <span class="op">=</span> tables[<span class="dv">9</span>]</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>uefa <span class="op">=</span> pd.read_html(<span class="bu">str</span>(selected_table))[<span class="dv">0</span>]</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>uefa.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output stream stderr">
<pre><code>/var/folders/3v/cd_7z9c16rl8tw6ng6t03vyw0000gn/T/ipykernel_68986/1354231701.py:10: FutureWarning: Passing literal html to &#39;read_html&#39; is deprecated and will be removed in a future version. To read from a literal string, wrap it in a &#39;StringIO&#39; object.
  uefa = pd.read_html(str(selected_table))[0]
</code></pre>
</div>
<div class="output execute_result" data-execution_count="20">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead tr th {
        text-align: left;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr>
      <th></th>
      <th colspan="3" halign="left">Ranking</th>
      <th>Club</th>
      <th>Association</th>
      <th colspan="6" halign="left">Coefficient</th>
    </tr>
    <tr>
      <th></th>
      <th>2024</th>
      <th>2023</th>
      <th>Mvmt</th>
      <th>Club</th>
      <th>Association</th>
      <th>2019–20</th>
      <th>2020–21</th>
      <th>2021–22</th>
      <th>2022–23</th>
      <th>2023–24</th>
      <th>Total</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>–</td>
      <td>Manchester City</td>
      <td>England</td>
      <td>25.0</td>
      <td>35.0</td>
      <td>27.0</td>
      <td>33.0</td>
      <td>28.0</td>
      <td>148.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>2</td>
      <td>–</td>
      <td>Bayern Munich</td>
      <td>Germany</td>
      <td>36.0</td>
      <td>27.0</td>
      <td>26.0</td>
      <td>27.0</td>
      <td>28.0</td>
      <td>144.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>5</td>
      <td>+2</td>
      <td>Real Madrid</td>
      <td>Spain</td>
      <td>17.0</td>
      <td>26.0</td>
      <td>30.0</td>
      <td>29.0</td>
      <td>32.0</td>
      <td>134.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>6</td>
      <td>+2</td>
      <td>Paris Saint-Germain</td>
      <td>France</td>
      <td>31.0</td>
      <td>24.0</td>
      <td>19.0</td>
      <td>19.0</td>
      <td>23.0</td>
      <td>116.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>4</td>
      <td>–1</td>
      <td>Liverpool</td>
      <td>England</td>
      <td>18.0</td>
      <td>24.0</td>
      <td>33.0</td>
      <td>19.0</td>
      <td>20.0</td>
      <td>114.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Next, we found the results of all matches that occurred in the
Champions League from 2016 - 2022. Since we are specifically
investigating from 2018 onward, we decided to filter out all matches
that occurred before that point. The reason why we are interested in the
outcome of different matches is so we can determine where each team
finished at the end of the UCL tournament. The dataset used can be found
at the following link: <a
href="https://www.kaggle.com/datasets/mikolajhojda/uefa-champions-league-20152016-20212022"
class="uri">https://www.kaggle.com/datasets/mikolajhojda/uefa-champions-league-20152016-20212022</a></p>
</div>
<div class="cell code" data-execution_count="21">
<div class="sourceCode" id="cb31"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>matches <span class="op">=</span> pd.read_csv(<span class="st">&quot;matches.csv&quot;</span>, encoding<span class="op">=</span><span class="st">&#39;UTF-8&#39;</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the &#39;datetime&#39; column to datetime format</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>matches[<span class="st">&#39;datetime&#39;</span>] <span class="op">=</span> pd.to_datetime(matches[<span class="st">&#39;datetime&#39;</span>])</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the cutoff date for filtering</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>cutoff_date <span class="op">=</span> pd.Timestamp(<span class="st">&#39;2018-07-01 00:00:00+00:00&#39;</span>)</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the DataFrame to include only matches from the cutoff date onwards</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>filtered_matches <span class="op">=</span> matches[matches[<span class="st">&#39;datetime&#39;</span>] <span class="op">&gt;=</span> cutoff_date]</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>filtered_matches</span></code></pre></div>
<div class="output execute_result" data-execution_count="21">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>datetime</th>
      <th>team1</th>
      <th>team2</th>
      <th>team1_code</th>
      <th>team2_code</th>
      <th>round</th>
      <th>score1</th>
      <th>score2</th>
      <th>adj_score1</th>
      <th>adj_score2</th>
      <th>chances1</th>
      <th>chances2</th>
      <th>moves1</th>
      <th>moves2</th>
      <th>group</th>
      <th>matchday</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>250</th>
      <td>250</td>
      <td>2018-09-18 16:55:00+00:00</td>
      <td>Internazionale</td>
      <td>Tottenham Hotspur</td>
      <td>INT</td>
      <td>TOT</td>
      <td>g</td>
      <td>2</td>
      <td>1</td>
      <td>2.100</td>
      <td>1.05</td>
      <td>1.400</td>
      <td>0.882</td>
      <td>1.722</td>
      <td>0.899</td>
      <td>B</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>251</th>
      <td>251</td>
      <td>2018-09-18 16:55:00+00:00</td>
      <td>Barcelona</td>
      <td>PSV</td>
      <td>BAR</td>
      <td>PSV</td>
      <td>g</td>
      <td>4</td>
      <td>0</td>
      <td>3.483</td>
      <td>0.00</td>
      <td>2.034</td>
      <td>0.669</td>
      <td>2.524</td>
      <td>0.400</td>
      <td>B</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>252</th>
      <td>252</td>
      <td>2018-09-18 19:00:00+00:00</td>
      <td>Club Brugge</td>
      <td>Borussia Dortmund</td>
      <td>CBKV</td>
      <td>DOR</td>
      <td>g</td>
      <td>0</td>
      <td>1</td>
      <td>0.000</td>
      <td>1.05</td>
      <td>0.511</td>
      <td>0.946</td>
      <td>0.833</td>
      <td>1.726</td>
      <td>A</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>253</th>
      <td>253</td>
      <td>2018-09-18 19:00:00+00:00</td>
      <td>Liverpool</td>
      <td>Paris Saint-Germain</td>
      <td>LIV</td>
      <td>PSG</td>
      <td>g</td>
      <td>3</td>
      <td>2</td>
      <td>3.150</td>
      <td>2.10</td>
      <td>2.377</td>
      <td>1.201</td>
      <td>1.927</td>
      <td>0.711</td>
      <td>C</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>254</th>
      <td>254</td>
      <td>2018-09-18 19:00:00+00:00</td>
      <td>Schalke 04</td>
      <td>FC Porto</td>
      <td>SCH</td>
      <td>POR</td>
      <td>g</td>
      <td>1</td>
      <td>1</td>
      <td>1.050</td>
      <td>1.05</td>
      <td>0.886</td>
      <td>2.374</td>
      <td>0.906</td>
      <td>0.886</td>
      <td>D</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>739</th>
      <td>739</td>
      <td>2022-04-26 19:00:00+00:00</td>
      <td>Manchester City</td>
      <td>Real Madrid</td>
      <td>MNC</td>
      <td>MAD</td>
      <td>s</td>
      <td>4</td>
      <td>3</td>
      <td>4.200</td>
      <td>3.15</td>
      <td>3.307</td>
      <td>1.620</td>
      <td>1.739</td>
      <td>0.980</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>740</th>
      <td>740</td>
      <td>2022-04-27 19:00:00+00:00</td>
      <td>Liverpool</td>
      <td>Villarreal</td>
      <td>LIV</td>
      <td>VLR</td>
      <td>s</td>
      <td>2</td>
      <td>0</td>
      <td>2.100</td>
      <td>0.00</td>
      <td>1.843</td>
      <td>0.090</td>
      <td>2.481</td>
      <td>0.186</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>741</th>
      <td>741</td>
      <td>2022-05-03 19:00:00+00:00</td>
      <td>Villarreal</td>
      <td>Liverpool</td>
      <td>VLR</td>
      <td>LIV</td>
      <td>s</td>
      <td>2</td>
      <td>3</td>
      <td>2.100</td>
      <td>3.15</td>
      <td>1.478</td>
      <td>1.587</td>
      <td>0.860</td>
      <td>1.607</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>742</th>
      <td>742</td>
      <td>2022-05-04 19:00:00+00:00</td>
      <td>Real Madrid</td>
      <td>Manchester City</td>
      <td>MAD</td>
      <td>MNC</td>
      <td>s</td>
      <td>3</td>
      <td>1</td>
      <td>3.150</td>
      <td>1.05</td>
      <td>2.602</td>
      <td>1.731</td>
      <td>2.397</td>
      <td>1.841</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>743</th>
      <td>743</td>
      <td>2022-05-28 19:36:00+00:00</td>
      <td>Liverpool</td>
      <td>Real Madrid</td>
      <td>LIV</td>
      <td>MAD</td>
      <td>f</td>
      <td>0</td>
      <td>1</td>
      <td>0.000</td>
      <td>1.05</td>
      <td>2.124</td>
      <td>0.740</td>
      <td>2.804</td>
      <td>0.506</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
<p>494 rows × 17 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Building off of our intentions with the matches dataset, we then
create a dataframe to list out the teams that played in each year's UCL
knockout stage and the furthest they got. The code below creates that
dataframe.</p>
</div>
<div class="cell code" data-execution_count="22">
<div class="sourceCode" id="cb32"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>knockout_rounds <span class="op">=</span> [<span class="st">&#39;Round of 16&#39;</span>, <span class="st">&#39;Quarter-finals&#39;</span>, <span class="st">&#39;Semi-finals&#39;</span>, <span class="st">&#39;Final&#39;</span>]</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>matches <span class="op">=</span> matches[matches[<span class="st">&#39;round&#39;</span>].isin(knockout_rounds)]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a dictionary to specify the order of rounds</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>round_order <span class="op">=</span> {</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;k&#39;</span>: <span class="st">&#39;ro16 reached&#39;</span>,</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;q&#39;</span>: <span class="st">&#39;qf reached&#39;</span>,</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;s&#39;</span>: <span class="st">&#39;sf reached&#39;</span>,</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;f&#39;</span>: <span class="st">&#39;final reached&#39;</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list to store the results</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>results <span class="op">=</span> []</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Iterate over each year</span></span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> year <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">2019</span>, <span class="dv">2023</span>):</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Filter matches for the current season</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    season_start <span class="op">=</span> pd.Timestamp(<span class="ss">f&#39;</span><span class="sc">{</span>year <span class="op">-</span> <span class="dv">1</span><span class="sc">}</span><span class="ss">-07-01 00:00:00+00:00&#39;</span>)</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    season_end <span class="op">=</span> pd.Timestamp(<span class="ss">f&#39;</span><span class="sc">{</span>year<span class="sc">}</span><span class="ss">-06-30 00:00:00+00:00&#39;</span>)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    season_matches <span class="op">=</span> filtered_matches[(filtered_matches[<span class="st">&#39;datetime&#39;</span>] <span class="op">&gt;=</span> season_start) <span class="op">&amp;</span> (filtered_matches[<span class="st">&#39;datetime&#39;</span>] <span class="op">&lt;=</span> season_end)]</span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a>    teams <span class="op">=</span> <span class="bu">set</span>(season_matches[<span class="st">&#39;team1&#39;</span>]).union(<span class="bu">set</span>(season_matches[<span class="st">&#39;team2&#39;</span>]))</span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> team <span class="kw">in</span> teams:</span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>        team_data <span class="op">=</span> {<span class="st">&#39;team&#39;</span>: team, <span class="st">&#39;year&#39;</span>: year, <span class="st">&#39;ro16 reached&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;qf reached&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;sf reached&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;final reached&#39;</span>: <span class="dv">0</span>, <span class="st">&#39;final won&#39;</span>: <span class="dv">0</span>}</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the team reached each round</span></span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> round_name, column_name <span class="kw">in</span> round_order.items():</span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="bu">any</span>((season_matches[<span class="st">&#39;team1&#39;</span>] <span class="op">==</span> team) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;round&#39;</span>] <span class="op">==</span> round_name)) <span class="kw">or</span> <span class="op">\</span></span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a>               <span class="bu">any</span>((season_matches[<span class="st">&#39;team2&#39;</span>] <span class="op">==</span> team) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;round&#39;</span>] <span class="op">==</span> round_name)):</span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>                team_data[column_name] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Check if the team won the final</span></span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="bu">any</span>((season_matches[<span class="st">&#39;team1&#39;</span>] <span class="op">==</span> team) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;round&#39;</span>] <span class="op">==</span> <span class="st">&#39;f&#39;</span>) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;score1&#39;</span>] <span class="op">&gt;</span> season_matches[<span class="st">&#39;score2&#39;</span>])) <span class="kw">or</span> <span class="op">\</span></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>           <span class="bu">any</span>((season_matches[<span class="st">&#39;team2&#39;</span>] <span class="op">==</span> team) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;round&#39;</span>] <span class="op">==</span> <span class="st">&#39;f&#39;</span>) <span class="op">&amp;</span> (season_matches[<span class="st">&#39;score2&#39;</span>] <span class="op">&gt;</span> season_matches[<span class="st">&#39;score1&#39;</span>])):</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a>            team_data[<span class="st">&#39;final won&#39;</span>] <span class="op">=</span> <span class="dv">1</span></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a>        <span class="co"># Append the team&#39;s data to the results list</span></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>        results.append(team_data)</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a DataFrame from the results list</span></span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>results_df <span class="op">=</span> pd.DataFrame(results)</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the final DataFrame</span></span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>results_df</span></code></pre></div>
<div class="output execute_result" data-execution_count="22">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>team</th>
      <th>year</th>
      <th>ro16 reached</th>
      <th>qf reached</th>
      <th>sf reached</th>
      <th>final reached</th>
      <th>final won</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Borussia Dortmund</td>
      <td>2019</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Benfica</td>
      <td>2019</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AS Roma</td>
      <td>2019</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ajax</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Internazionale</td>
      <td>2019</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>125</th>
      <td>Liverpool</td>
      <td>2022</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>126</th>
      <td>Atalanta</td>
      <td>2022</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>127</th>
      <td>Bayern Munich</td>
      <td>2022</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>128</th>
      <td>Juventus</td>
      <td>2022</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>129</th>
      <td>Paris Saint-Germain</td>
      <td>2022</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>130 rows × 7 columns</p>
</div>
</div>
</div>
<div class="cell markdown">
<p>Here, we filter out teams that have never reached the knockout stage
of a UCL. We think that because these teams have never reached the
knockout stage, and we are specifically predicting the results of the
knockout stage, teams that have never reached the knockout stage are
likely to not provide much information about winning chances in the
knockout stage.</p>
</div>
<div class="cell code" data-execution_count="23">
<div class="sourceCode" id="cb33"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>filtered_results_df <span class="op">=</span> results_df[results_df[<span class="st">&#39;ro16 reached&#39;</span>] <span class="op">==</span> <span class="dv">1</span>]</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>filtered_results_df</span></code></pre></div>
<div class="output execute_result" data-execution_count="23">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>team</th>
      <th>year</th>
      <th>ro16 reached</th>
      <th>qf reached</th>
      <th>sf reached</th>
      <th>final reached</th>
      <th>final won</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Borussia Dortmund</td>
      <td>2019</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AS Roma</td>
      <td>2019</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ajax</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Manchester City</td>
      <td>2019</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Real Madrid</td>
      <td>2019</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>124</th>
      <td>Lille</td>
      <td>2022</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>125</th>
      <td>Liverpool</td>
      <td>2022</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
    </tr>
    <tr>
      <th>127</th>
      <td>Bayern Munich</td>
      <td>2022</td>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>128</th>
      <td>Juventus</td>
      <td>2022</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>129</th>
      <td>Paris Saint-Germain</td>
      <td>2022</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>66 rows × 7 columns</p>
</div>
</div>
</div>
<section id="data-processing" class="cell markdown" id="XFavjgb4am21">
<h2><strong>Data Processing</strong></h2>
<ol>
<li>Put data in Dataframe</li>
<li>Remove Unecessary Columns</li>
<li>Do any Data Filtering we need to do</li>
<li>Do any Formatting we need to, like dates, years, etc</li>
<li>Do any other data modifying or merging needed</li>
</ol>
<p>Before you start the data analysis, choose how you want to modify the
cleaned data for certain problems and Handle Missing Data</p>
</section>
<section id="putting-net-value-data-into-one-dataframe-and-filtering"
class="cell markdown" id="kgRBncvhBIRn">
<h3>Putting Net Value Data into one DataFrame and filtering</h3>
<p>We have 5 different tables for all of the Net Values of teams from
different years, but we want to put it all into one table for further
analysis.</p>
</section>
<div class="cell code" data-execution_count="24" id="08loIvXPBDaU">
<div class="sourceCode" id="cb34"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a year label to each of the datasets</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>twentythree[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2023&quot;</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>twentytwo[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2022&quot;</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>twentyone[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2021&quot;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>twenty[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2020&quot;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>nineteen[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2019&quot;</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a><span class="co"># List of DataFrames to concatenate</span></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>pds <span class="op">=</span> [twentythree, twentytwo, twentyone, twenty, nineteen]</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>net_vals <span class="op">=</span> pd.concat(pds, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>net_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="24">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>wappen</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Squad</th>
      <th>ø-Age</th>
      <th>Market Value</th>
      <th>ø-Market Value</th>
      <th>Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Filter by season:</td>
      <td>23/2423/2422/2321/2220/2119/2018/1917/1816/171...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Real Madrid</td>
      <td>24.0</td>
      <td>27.3</td>
      <td>€1.04bn</td>
      <td>€43.21m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Borussia Dortmund</td>
      <td>29.0</td>
      <td>25.5</td>
      <td>€463.70m</td>
      <td>€15.99m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>22.0</td>
      <td>26.9</td>
      <td>€1.27bn</td>
      <td>€57.74m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Arsenal FC</td>
      <td>25.0</td>
      <td>25.7</td>
      <td>€1.12bn</td>
      <td>€44.74m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="f3odnZo5BNQu">
<p>Now we are going to do some filtering. We will start by dropping
columns that don't have data useful to us.</p>
</div>
<div class="cell code" data-execution_count="25" id="BzFDG-KRBO-E">
<div class="sourceCode" id="cb35"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>net_vals <span class="op">=</span> net_vals.drop(net_vals.columns[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">9</span>]], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>net_vals.rename(columns<span class="op">=</span>{<span class="st">&#39;ø-Age&#39;</span>: <span class="st">&#39;Market Value&#39;</span>, <span class="st">&#39;Club.1&#39;</span> : <span class="st">&#39;Squad Size&#39;</span>}, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>net_vals <span class="op">=</span> net_vals.drop(<span class="dv">0</span>)</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>net_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="25">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>wappen</th>
      <th>Market Value</th>
      <th>Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>€43.21m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>€15.99m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>€57.74m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>€44.74m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>€33.99m</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now convert these market values to a numerical value. We also
normalize the data for market value. Normalizing the data simply means
that we are organizing the data in such a manner that will benefit our
models and improve the consistency of our data. This will eventually put
our Market Value values onto a scale from 0-1, which will make our data
much easier to visualize and compare.</p>
</div>
<div class="cell code" data-execution_count="27">
<div class="sourceCode" id="cb36"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_currency(column):</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> column.<span class="bu">str</span>.replace(<span class="st">&#39;€&#39;</span>, <span class="st">&#39;&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;m&#39;</span>, <span class="st">&#39;0000&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;bn&#39;</span>, <span class="st">&#39;0000000&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;.&#39;</span>, <span class="st">&#39;&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;k&#39;</span>, <span class="st">&#39;000&#39;</span>).astype(<span class="bu">float</span>)</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>net_vals[<span class="st">&#39;Market Value&#39;</span>] <span class="op">=</span> clean_currency(net_vals[<span class="st">&#39;Market Value&#39;</span>])</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Normalize the data</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>net_vals[<span class="st">&#39;Market Value Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(net_vals[[<span class="st">&#39;Market Value&#39;</span>]])</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop our market value column</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>net_vals.drop(columns <span class="op">=</span> [<span class="st">&#39;Market Value&#39;</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>net_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="27">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>wappen</th>
      <th>Year</th>
      <th>Market Value Normalized</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1</th>
      <td>NaN</td>
      <td>2023</td>
      <td>0.746939</td>
    </tr>
    <tr>
      <th>2</th>
      <td>NaN</td>
      <td>2023</td>
      <td>0.272863</td>
    </tr>
    <tr>
      <th>3</th>
      <td>NaN</td>
      <td>2023</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>NaN</td>
      <td>2023</td>
      <td>0.773586</td>
    </tr>
    <tr>
      <th>5</th>
      <td>NaN</td>
      <td>2023</td>
      <td>0.586359</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="UFASr97cKCa9">
<p>Now we are going to look at our Net Tranfer Values from different
years, and collapse them into a single table for analysis.</p>
</div>
<div class="cell code" data-execution_count="28" id="GDW8pElbShLm">
<div class="sourceCode" id="cb37"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Add a year label to each of the datasets</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>nts23[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2023&quot;</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>nts22[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2022&quot;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>nts21[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2021&quot;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>nts20[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2020&quot;</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>nts19[<span class="st">&#39;Year&#39;</span>] <span class="op">=</span> <span class="st">&quot;2019&quot;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="co"># List of DataFrames to concatenate</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>pds <span class="op">=</span> [nts23, nts22, nts21, nts20, nts19]</span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>net_transfer_vals <span class="op">=</span> pd.concat(pds, ignore_index<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="28">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>#</th>
      <th>Club</th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Expenditure</th>
      <th>Arrivals</th>
      <th>Income</th>
      <th>Departures</th>
      <th>Balance</th>
      <th>Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>NaN</td>
      <td>Chelsea FC</td>
      <td>€467.80m</td>
      <td>29</td>
      <td>€269.50m</td>
      <td>31</td>
      <td>€-198.30m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>2</td>
      <td>NaN</td>
      <td>Paris Saint-Germain</td>
      <td>€454.50m</td>
      <td>33</td>
      <td>€207.50m</td>
      <td>31</td>
      <td>€-247.00m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>3</td>
      <td>NaN</td>
      <td>Al-Hilal SFC</td>
      <td>€376.10m</td>
      <td>19</td>
      <td>€1.38m</td>
      <td>22</td>
      <td>€-374.72m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>4</td>
      <td>NaN</td>
      <td>Tottenham Hotspur</td>
      <td>€272.10m</td>
      <td>27</td>
      <td>€120.70m</td>
      <td>22</td>
      <td>€-151.40m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>5</td>
      <td>NaN</td>
      <td>Manchester City</td>
      <td>€259.60m</td>
      <td>17</td>
      <td>€125.80m</td>
      <td>20</td>
      <td>€-133.80m</td>
      <td>NaN</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="Bez_gxI8S0o4">
<p>Here, we are going to drop some unnecessary columns so our data is
more readable</p>
</div>
<div class="cell code" data-execution_count="29" id="bIj4MSalSlQp">
<div class="sourceCode" id="cb38"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>net_transfer_vals <span class="op">=</span> net_transfer_vals.drop(net_transfer_vals.columns[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>]], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="29">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club.1</th>
      <th>Club.2</th>
      <th>Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Chelsea FC</td>
      <td>€467.80m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Paris Saint-Germain</td>
      <td>€454.50m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Al-Hilal SFC</td>
      <td>€376.10m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Tottenham Hotspur</td>
      <td>€272.10m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Manchester City</td>
      <td>€259.60m</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown" id="2Ztn-AimS5P5">
<p>Here, we rename the columns to get a better idea of what exactly it
is we are looking at</p>
</div>
<div class="cell code" data-execution_count="30" id="r1YcT0esSnYx">
<div class="sourceCode" id="cb39"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>new_col_names <span class="op">=</span> [<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Expenditures&#39;</span>, <span class="st">&#39;Year&#39;</span>]</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.columns <span class="op">=</span> new_col_names</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="30">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Expenditures</th>
      <th>Year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Chelsea FC</td>
      <td>€467.80m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Paris Saint-Germain</td>
      <td>€454.50m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Al-Hilal SFC</td>
      <td>€376.10m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Tottenham Hotspur</td>
      <td>€272.10m</td>
      <td>2023</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Manchester City</td>
      <td>€259.60m</td>
      <td>2023</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we convert these into numerical values. Again, we are normalizing
the data for expenditures to make data easier to visualize and
compare.</p>
</div>
<div class="cell code" data-execution_count="31">
<div class="sourceCode" id="cb40"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> clean_currency(column):</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> column.<span class="bu">str</span>.replace(<span class="st">&#39;€&#39;</span>, <span class="st">&#39;&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;m&#39;</span>, <span class="st">&#39;00&#39;</span>).<span class="bu">str</span>.replace(<span class="st">&#39;.&#39;</span>, <span class="st">&#39;&#39;</span>).astype(<span class="bu">float</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>net_transfer_vals[<span class="st">&#39;Expenditures&#39;</span>] <span class="op">=</span> clean_currency(net_transfer_vals[<span class="st">&#39;Expenditures&#39;</span>])</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#Normalize the data</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>net_transfer_vals[<span class="st">&#39;Expenditures Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(net_transfer_vals[[<span class="st">&#39;Expenditures&#39;</span>]])</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop our expenditures column</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.drop(columns <span class="op">=</span> [<span class="st">&#39;Expenditures&#39;</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>net_transfer_vals.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="31">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Year</th>
      <th>Expenditures Normalized</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Chelsea FC</td>
      <td>2023</td>
      <td>0.713644</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Paris Saint-Germain</td>
      <td>2023</td>
      <td>0.690214</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Al-Hilal SFC</td>
      <td>2023</td>
      <td>0.552101</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Tottenham Hotspur</td>
      <td>2023</td>
      <td>0.368889</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Manchester City</td>
      <td>2023</td>
      <td>0.346869</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we normalize and process the SPI data. Similar to before,
normalizing this data will help improve our model accuracy.</p>
</div>
<div class="cell code" data-execution_count="32">
<div class="sourceCode" id="cb41"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>spi <span class="op">=</span> spi.drop(spi.columns[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>]], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>spi.rename(columns <span class="op">=</span> {<span class="st">&#39;name&#39;</span> : <span class="st">&quot;Club&quot;</span>}, inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#Normalize the spi</span></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>spi[<span class="st">&#39;SPI Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(spi[[<span class="st">&#39;spi&#39;</span>]])</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop our spi column</span></span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>spi.drop(columns <span class="op">=</span> [<span class="st">&#39;spi&#39;</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>spi.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="32">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>SPI Normalized</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Manchester City</td>
      <td>1.000000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bayern Munich</td>
      <td>0.950195</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Barcelona</td>
      <td>0.935736</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Real Madrid</td>
      <td>0.912899</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Liverpool</td>
      <td>0.907390</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we process our All Time Club Ranking Data. This data is helpful
because it gives us more "per UCL" statistics rather than overall
statistics. The numbers for teams like Real Madrid, for example, are
much higher, because they have attended the Champions League more than
any other team. Thus this gives us more information on a per year
basis.</p>
</div>
<div class="cell code" data-execution_count="33">
<div class="sourceCode" id="cb42"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Played per UCL&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Played&#39;</span>] <span class="op">/</span> rank[<span class="st">&#39;Participated&#39;</span>]</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Won per UCL&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Win&#39;</span>] <span class="op">/</span> rank[<span class="st">&#39;Participated&#39;</span>]</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Winrate&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Win&#39;</span>] <span class="op">/</span> (rank[<span class="st">&#39;Loss&#39;</span>] <span class="op">+</span> rank[<span class="st">&#39;Draw&#39;</span>])</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Lossrate&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Loss&#39;</span>] <span class="op">/</span> (rank[<span class="st">&#39;Win&#39;</span>] <span class="op">+</span> rank[<span class="st">&#39;Draw&#39;</span>])</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;GD per Game&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Goal Diff&#39;</span>] <span class="op">/</span> rank[<span class="st">&#39;Played&#39;</span>]</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Pts per UCL&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Pts&#39;</span>] <span class="op">/</span> rank[<span class="st">&#39;Participated&#39;</span>]</span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>rank[<span class="st">&#39;Titles per UCL&#39;</span>] <span class="op">=</span> rank[<span class="st">&#39;Titles&#39;</span>] <span class="op">/</span> rank[<span class="st">&#39;Participated&#39;</span>]</span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>selected_columns <span class="op">=</span> [<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Played per UCL&#39;</span>, <span class="st">&#39;Won per UCL&#39;</span>, <span class="st">&#39;Pts per UCL&#39;</span>, <span class="st">&#39;Titles per UCL&#39;</span>, <span class="st">&#39;Winrate&#39;</span>, <span class="st">&#39;Lossrate&#39;</span>, <span class="st">&#39;GD per Game&#39;</span>]</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>new_rank <span class="op">=</span> rank[selected_columns].copy()</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a><span class="co">#here, we are dropping all instances where there is an infinite loss rate</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>new_rank.replace([np.inf, <span class="op">-</span>np.inf], np.nan, inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>new_rank.dropna(inplace<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>new_rank.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="33">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Played per UCL</th>
      <th>Won per UCL</th>
      <th>Pts per UCL</th>
      <th>Titles per UCL</th>
      <th>Winrate</th>
      <th>Lossrate</th>
      <th>GD per Game</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Real Madrid CF</td>
      <td>8.981132</td>
      <td>5.377358</td>
      <td>12.283019</td>
      <td>0.264151</td>
      <td>1.492147</td>
      <td>0.300546</td>
      <td>1.105042</td>
    </tr>
    <tr>
      <th>1</th>
      <td>FC Bayern München</td>
      <td>9.794872</td>
      <td>5.871795</td>
      <td>13.692308</td>
      <td>0.153846</td>
      <td>1.496732</td>
      <td>0.252459</td>
      <td>1.128272</td>
    </tr>
    <tr>
      <th>2</th>
      <td>FC Barcelona</td>
      <td>10.272727</td>
      <td>5.969697</td>
      <td>14.242424</td>
      <td>0.151515</td>
      <td>1.387324</td>
      <td>0.241758</td>
      <td>0.955752</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Manchester United</td>
      <td>9.766667</td>
      <td>5.333333</td>
      <td>12.966667</td>
      <td>0.100000</td>
      <td>1.203008</td>
      <td>0.279476</td>
      <td>0.849829</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Juventus</td>
      <td>8.135135</td>
      <td>4.135135</td>
      <td>10.162162</td>
      <td>0.054054</td>
      <td>1.033784</td>
      <td>0.349776</td>
      <td>0.591362</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we normalize the processed data. This will again make things
easier for our model.</p>
</div>
<div class="cell code" data-execution_count="34">
<div class="sourceCode" id="cb43"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>scaler <span class="op">=</span> MinMaxScaler()</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Matches per UCL Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Played per UCL&#39;</span>]])</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Wins per UCL Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Won per UCL&#39;</span>]])</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Pts per UCL Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Pts per UCL&#39;</span>]])</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Titles per UCL Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Titles per UCL&#39;</span>]])</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Winrate Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Winrate&#39;</span>]])</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Lossrate Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;Lossrate&#39;</span>]])</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;GD per game Normalized&#39;</span>] <span class="op">=</span> scaler.fit_transform(new_rank[[<span class="st">&#39;GD per Game&#39;</span>]])</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a><span class="co">#Drop our un-normalized column</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>new_rank.drop(columns <span class="op">=</span> [<span class="st">&#39;Played per UCL&#39;</span>, <span class="st">&#39;Won per UCL&#39;</span>, <span class="st">&#39;Pts per UCL&#39;</span>, <span class="st">&#39;Titles per UCL&#39;</span>, <span class="st">&#39;Winrate&#39;</span>, <span class="st">&#39;Lossrate&#39;</span>, <span class="st">&#39;GD per Game&#39;</span>], inplace <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the new DataFrame</span></span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>new_rank.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="34">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Matches per UCL Normalized</th>
      <th>Wins per UCL Normalized</th>
      <th>Pts per UCL Normalized</th>
      <th>Titles per UCL Normalized</th>
      <th>Winrate Normalized</th>
      <th>Lossrate Normalized</th>
      <th>GD per game Normalized</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Real Madrid CF</td>
      <td>0.598491</td>
      <td>0.900776</td>
      <td>0.815798</td>
      <td>0.396226</td>
      <td>0.298429</td>
      <td>0.033394</td>
      <td>0.796500</td>
    </tr>
    <tr>
      <th>1</th>
      <td>FC Bayern München</td>
      <td>0.663590</td>
      <td>0.983600</td>
      <td>0.911343</td>
      <td>0.230769</td>
      <td>0.299346</td>
      <td>0.028051</td>
      <td>0.799374</td>
    </tr>
    <tr>
      <th>2</th>
      <td>FC Barcelona</td>
      <td>0.701818</td>
      <td>1.000000</td>
      <td>0.948639</td>
      <td>0.227273</td>
      <td>0.277465</td>
      <td>0.026862</td>
      <td>0.778031</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Manchester United</td>
      <td>0.661333</td>
      <td>0.893401</td>
      <td>0.862147</td>
      <td>0.150000</td>
      <td>0.240602</td>
      <td>0.031053</td>
      <td>0.764927</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Juventus</td>
      <td>0.530811</td>
      <td>0.692688</td>
      <td>0.672011</td>
      <td>0.081081</td>
      <td>0.206757</td>
      <td>0.038864</td>
      <td>0.732952</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Now we will process our uefa coefficient dataset</p>
</div>
<div class="cell code" data-execution_count="35">
<div class="sourceCode" id="cb44"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>uefa <span class="op">=</span> uefa.drop(uefa.columns[[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">10</span>]], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>uefa.rename(columns <span class="op">=</span> {<span class="st">&#39;2019-2020&#39;</span> : <span class="st">&#39;2019&#39;</span>, <span class="st">&#39;2020-2021&#39;</span> : <span class="st">&#39;2020&#39;</span>, <span class="st">&#39;2021-2022&#39;</span> : <span class="st">&#39;2021&#39;</span>, <span class="st">&#39;2022-2023&#39;</span> : <span class="st">&#39;2022&#39;</span>, <span class="st">&#39;2023-2024&#39;</span> : <span class="st">&#39;2023&#39;</span>,})</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>uefa.columns <span class="op">=</span> [<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;2019&#39;</span>, <span class="st">&#39;2020&#39;</span>, <span class="st">&#39;2021&#39;</span>, <span class="st">&#39;2022&#39;</span>, <span class="st">&#39;2023&#39;</span>]</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>uefa_melted <span class="op">=</span> pd.melt(uefa, id_vars<span class="op">=</span>[<span class="st">&#39;Club&#39;</span>], var_name<span class="op">=</span><span class="st">&#39;Year&#39;</span>, value_name<span class="op">=</span><span class="st">&#39;Coefficient&#39;</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>uefa_melted.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="35">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Year</th>
      <th>Coefficient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Manchester City</td>
      <td>2019</td>
      <td>25.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Bayern Munich</td>
      <td>2019</td>
      <td>36.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Real Madrid</td>
      <td>2019</td>
      <td>17.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Paris Saint-Germain</td>
      <td>2019</td>
      <td>31.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Liverpool</td>
      <td>2019</td>
      <td>18.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<div class="cell markdown">
<p>Here we implement manual mapping so that the names of the clubs in
the dataframe are consistent. In many of our tables and datasets, the
names of certain clubs are slightly different. By performing this
mapping, we can attribute the stats of these different names to the same
club.</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb45"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> remove_fc(club_name):</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> club_name.replace(<span class="st">&quot; FC&quot;</span>, <span class="st">&quot;&quot;</span>).replace(<span class="st">&quot;FC &quot;</span>, <span class="st">&quot;&quot;</span>).replace(<span class="st">&quot;CF&quot;</span>, <span class="st">&quot;&quot;</span>).replace(<span class="st">&quot;München&quot;</span>, <span class="st">&quot;Munich&quot;</span>).replace(<span class="st">&quot;SL &quot;</span>, <span class="st">&quot;&quot;</span>).replace(<span class="st">&quot;AFC &quot;</span>, <span class="st">&quot;&quot;</span>).replace(<span class="st">&quot;Sporting Clube de Portugal&quot;</span>, <span class="st">&quot;Sporting CP&quot;</span>).replace(<span class="st">&quot;Real Madrid CF&quot;</span>, <span class="st">&quot;Real Madrid&quot;</span>)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>spi[<span class="st">&#39;Club&#39;</span>] <span class="op">=</span> [remove_fc(club) <span class="cf">for</span> club <span class="kw">in</span> spi[<span class="st">&#39;Club&#39;</span>].astype(<span class="bu">str</span>)]</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a>net_vals[<span class="st">&#39;Club&#39;</span>] <span class="op">=</span> [remove_fc(club) <span class="cf">for</span> club <span class="kw">in</span> net_vals[<span class="st">&#39;Club&#39;</span>].astype(<span class="bu">str</span>)]</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>new_rank[<span class="st">&#39;Club&#39;</span>] <span class="op">=</span> [remove_fc(club) <span class="cf">for</span> club <span class="kw">in</span> new_rank[<span class="st">&#39;Club&#39;</span>].astype(<span class="bu">str</span>)]</span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>net_transfer_vals[<span class="st">&#39;Club&#39;</span>] <span class="op">=</span> [remove_fc(club) <span class="cf">for</span> club <span class="kw">in</span> net_transfer_vals[<span class="st">&#39;Club&#39;</span>].astype(<span class="bu">str</span>)]</span></code></pre></div>
</div>
<div class="cell markdown">
<p>Now, we will merge our data into a single dataframe</p>
</div>
<div class="cell code">
<div class="sourceCode" id="cb46"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(net_vals, net_transfer_vals, on<span class="op">=</span>[<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Year&#39;</span>], how<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(merged_data, spi, on<span class="op">=</span>[<span class="st">&#39;Club&#39;</span>], how<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(merged_data, new_rank, on<span class="op">=</span>[<span class="st">&#39;Club&#39;</span>], how<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> pd.merge(merged_data, uefa_melted, on<span class="op">=</span>[<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Year&#39;</span>], how<span class="op">=</span><span class="st">&#39;left&#39;</span>)</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>standard_names <span class="op">=</span> pd.DataFrame({</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;Standard Name&#39;</span>: [<span class="st">&#39;Manchester City&#39;</span>, <span class="st">&#39;Ajax&#39;</span>, <span class="st">&#39;Liverpool&#39;</span>, <span class="st">&#39;Paris Saint-Germain&#39;</span>, <span class="st">&#39;Manchester United&#39;</span>, <span class="st">&#39;Barcelona&#39;</span>,</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;Juventus&#39;</span>, <span class="st">&#39;Schalke 04&#39;</span>, <span class="st">&#39;Real Madrid&#39;</span>, <span class="st">&#39;Lyon&#39;</span>, <span class="st">&#39;Atletico Madrid&#39;</span>, <span class="st">&#39;AS Roma&#39;</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;Borussia Dortmund&#39;</span>, <span class="st">&#39;FC Porto&#39;</span>, <span class="st">&#39;Bayern Munich&#39;</span>, <span class="st">&#39;Tottenham Hotspur&#39;</span>, <span class="st">&#39;Chelsea&#39;</span>, <span class="st">&#39;Atalanta&#39;</span>,</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;Napoli&#39;</span>, <span class="st">&#39;RB Leipzig&#39;</span>, <span class="st">&#39;Valencia&#39;</span>, <span class="st">&#39;Lazio&#39;</span>, <span class="st">&#39;Borussia Monchengladbach&#39;</span>, <span class="st">&#39;Sevilla FC&#39;</span>,</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>                      <span class="st">&#39;Internazionale&#39;</span>, <span class="st">&#39;Sporting CP&#39;</span>, <span class="st">&#39;Villarreal&#39;</span>, <span class="st">&#39;FC Salzburg&#39;</span>, <span class="st">&#39;Benfica&#39;</span>, <span class="st">&#39;Lille&#39;</span>]</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>})</span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>standard_name_list <span class="op">=</span> standard_names[<span class="st">&#39;Standard Name&#39;</span>].tolist()</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data[merged_data[<span class="st">&#39;Club&#39;</span>].isin(standard_name_list)]</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>merged_data.head(<span class="dv">5</span>)</span></code></pre></div>
<div class="output execute_result" data-execution_count="362">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Club</th>
      <th>Year</th>
      <th>Market Value Normalized</th>
      <th>Expenditures Normalized</th>
      <th>SPI Normalized</th>
      <th>Matches per UCL Normalized</th>
      <th>Wins per UCL Normalized</th>
      <th>Pts per UCL Normalized</th>
      <th>Titles per UCL Normalized</th>
      <th>Winrate Normalized</th>
      <th>Lossrate Normalized</th>
      <th>GD per game Normalized</th>
      <th>Coefficient</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Real Madrid</td>
      <td>2023</td>
      <td>0.817272</td>
      <td>0.117678</td>
      <td>0.912899</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>32.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Borussia Dortmund</td>
      <td>2023</td>
      <td>0.359418</td>
      <td>NaN</td>
      <td>0.895685</td>
      <td>0.527619</td>
      <td>0.646120</td>
      <td>0.612591</td>
      <td>0.071429</td>
      <td>0.182022</td>
      <td>0.054581</td>
      <td>0.712917</td>
      <td>29.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Manchester City</td>
      <td>2023</td>
      <td>1.000000</td>
      <td>0.346869</td>
      <td>1.000000</td>
      <td>0.612308</td>
      <td>0.850449</td>
      <td>0.796610</td>
      <td>0.115385</td>
      <td>0.249057</td>
      <td>0.035802</td>
      <td>0.778307</td>
      <td>28.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Paris Saint-Germain</td>
      <td>2023</td>
      <td>0.801382</td>
      <td>0.690214</td>
      <td>0.852192</td>
      <td>0.595000</td>
      <td>0.806155</td>
      <td>0.750000</td>
      <td>0.000000</td>
      <td>0.233333</td>
      <td>0.041667</td>
      <td>0.761012</td>
      <td>23.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Bayern Munich</td>
      <td>2023</td>
      <td>0.729443</td>
      <td>0.219854</td>
      <td>0.950195</td>
      <td>0.663590</td>
      <td>0.983600</td>
      <td>0.911343</td>
      <td>0.230769</td>
      <td>0.299346</td>
      <td>0.028051</td>
      <td>0.799374</td>
      <td>28.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>
</div>
<section id="exploratory-analysis--data-visualization"
class="cell markdown" id="jn5X9tUOaoNm">
<h2><strong>Exploratory Analysis &amp; Data Visualization</strong></h2>
<p>In this section of the data science life cycle, we are going to graph
the data in order to gain a better understanding of the data.</p>
<p>We are going to look at Year vs. Expenditures Normalized for every
team. This should give us an idea of how the expenditures per team has
changed over the years, which may affect our prediction.</p>
</section>
<div class="cell code">
<div class="sourceCode" id="cb47"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data.dropna(subset<span class="op">=</span>[<span class="st">&#39;Expenditures Normalized&#39;</span>])</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the data</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">6</span>))</span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> club <span class="kw">in</span> merged_data[<span class="st">&#39;Club&#39;</span>].unique():</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>    club_data <span class="op">=</span> merged_data[merged_data[<span class="st">&#39;Club&#39;</span>] <span class="op">==</span> club]</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>    plt.plot(club_data[<span class="st">&#39;Year&#39;</span>], club_data[<span class="st">&#39;Expenditures Normalized&#39;</span>], marker<span class="op">=</span><span class="st">&#39;o&#39;</span>, label<span class="op">=</span>club)</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">&#39;Year&#39;</span>)</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">&#39;Expenditures Normalized&#39;</span>)</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">&#39;Year vs Expenditures Normalized for Football Clubs&#39;</span>)</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>plt.legend()</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>plt.grid(<span class="va">True</span>)</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code></pre></div>
<div class="output display_data">
<p><img
src="vertopal_012bab8939a541738801010518a7f025/bee7e4515ec62308a514d45812893b5145e5be23.png" /></p>
</div>
</div>
<section id="model-analysis-hypothesis-testing--ml"
class="cell markdown" id="7aUHEqbtbHl-">
<h2><strong>Model: Analysis, Hypothesis Testing, &amp; ML</strong></h2>
<p>During this phase of the Data Lifecycle, we attempt to perform
various modeling techniques (such as linear regression or logistic
regression) in order to obtain a predictive model of our data. This
allows us to predict values for data outside of the scope of our data.
For example, we can use a linear regression model to predict how
temperature will changein the next few years, which is exactly what we
are going to attempt to do below.</p>
</section>
<div class="cell code">
<div class="sourceCode" id="cb48"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert columns to numeric and drop rows with NaN values</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>merged_data <span class="op">=</span> merged_data.<span class="bu">apply</span>(pd.to_numeric, errors<span class="op">=</span><span class="st">&#39;ignore&#39;</span>)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop all rows with any NaN values</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>merged_clean <span class="op">=</span> merged_data.dropna()</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocessing</span></span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate features and target</span></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>X <span class="op">=</span> merged_clean.drop(<span class="st">&#39;Coefficient&#39;</span>, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> merged_clean[<span class="st">&#39;Coefficient&#39;</span>]</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocessing pipelines for both numeric and categorical data</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>numeric_features <span class="op">=</span> [<span class="st">&#39;Market Value Normalized&#39;</span>, <span class="st">&#39;Expenditures Normalized&#39;</span>, <span class="st">&#39;SPI Normalized&#39;</span>, <span class="st">&#39;Matches per UCL Normalized&#39;</span>,</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;Wins per UCL Normalized&#39;</span>, <span class="st">&#39;Pts per UCL Normalized&#39;</span>, <span class="st">&#39;Titles per UCL Normalized&#39;</span>, <span class="st">&#39;Winrate Normalized&#39;</span>,</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;Lossrate Normalized&#39;</span>, <span class="st">&#39;GD per game Normalized&#39;</span>]</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>categorical_features <span class="op">=</span> [<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Year&#39;</span>]</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>numeric_transformer <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;scaler&#39;</span>, StandardScaler())</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>categorical_transformer <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;onehot&#39;</span>, OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">&#39;ignore&#39;</span>))</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a>preprocessor <span class="op">=</span> ColumnTransformer(</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a>    transformers<span class="op">=</span>[</span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&#39;num&#39;</span>, numeric_transformer, numeric_features),</span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&#39;cat&#39;</span>, categorical_transformer, categorical_features)</span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the model</span></span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a>model <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;preprocessor&#39;</span>, preprocessor),</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;regressor&#39;</span>, LinearRegression())</span>
<span id="cb48-37"><a href="#cb48-37" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb48-38"><a href="#cb48-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-39"><a href="#cb48-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Split the data into training and testing sets</span></span>
<span id="cb48-40"><a href="#cb48-40" aria-hidden="true" tabindex="-1"></a>X_train, X_test, y_train, y_test <span class="op">=</span> train_test_split(X, y, test_size<span class="op">=</span><span class="fl">0.2</span>, random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb48-41"><a href="#cb48-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-42"><a href="#cb48-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Train the model</span></span>
<span id="cb48-43"><a href="#cb48-43" aria-hidden="true" tabindex="-1"></a>model.fit(X_train, y_train)</span>
<span id="cb48-44"><a href="#cb48-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-45"><a href="#cb48-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the test set</span></span>
<span id="cb48-46"><a href="#cb48-46" aria-hidden="true" tabindex="-1"></a>y_pred <span class="op">=</span> model.predict(X_test)</span>
<span id="cb48-47"><a href="#cb48-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-48"><a href="#cb48-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb48-49"><a href="#cb48-49" aria-hidden="true" tabindex="-1"></a>mse <span class="op">=</span> mean_squared_error(y_test, y_pred)</span>
<span id="cb48-50"><a href="#cb48-50" aria-hidden="true" tabindex="-1"></a>r2 <span class="op">=</span> r2_score(y_test, y_pred)</span>
<span id="cb48-51"><a href="#cb48-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-52"><a href="#cb48-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Mean Squared Error: </span><span class="sc">{</span>mse<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb48-53"><a href="#cb48-53" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;R^2 Score: </span><span class="sc">{</span>r2<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb48-54"><a href="#cb48-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-55"><a href="#cb48-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out predictions and actual values</span></span>
<span id="cb48-56"><a href="#cb48-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Predictions vs Actual:&quot;</span>)</span>
<span id="cb48-57"><a href="#cb48-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pred, actual <span class="kw">in</span> <span class="bu">zip</span>(y_pred, y_test):</span>
<span id="cb48-58"><a href="#cb48-58" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Predicted: </span><span class="sc">{</span>pred<span class="sc">:.2f}</span><span class="ss">, Actual: </span><span class="sc">{</span>actual<span class="sc">:.2f}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Mean Squared Error: 24.514634394984842
R^2 Score: -0.05001493475022478

Predictions vs Actual:
Predicted: 17.57, Actual: 20.00
Predicted: 17.01, Actual: 25.00
Predicted: 24.83, Actual: 33.00
Predicted: 21.73, Actual: 20.00
Predicted: 24.40, Actual: 19.00
Predicted: 22.37, Actual: 21.00
Predicted: 19.04, Actual: 18.00
</code></pre>
</div>
</div>
<div class="cell code">
<div class="sourceCode" id="cb50"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Preprocessing pipelines for both numeric and categorical data</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>numeric_features <span class="op">=</span> [<span class="st">&#39;Market Value Normalized&#39;</span>, <span class="st">&#39;Expenditures Normalized&#39;</span>, <span class="st">&#39;SPI Normalized&#39;</span>, <span class="st">&#39;Matches per UCL Normalized&#39;</span>,</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;Wins per UCL Normalized&#39;</span>, <span class="st">&#39;Pts per UCL Normalized&#39;</span>, <span class="st">&#39;Titles per UCL Normalized&#39;</span>, <span class="st">&#39;Winrate Normalized&#39;</span>,</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&#39;Lossrate Normalized&#39;</span>, <span class="st">&#39;GD per game Normalized&#39;</span>]</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>categorical_features <span class="op">=</span> [<span class="st">&#39;Club&#39;</span>, <span class="st">&#39;Year&#39;</span>]</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>numeric_transformer <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;scaler&#39;</span>, StandardScaler())</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>categorical_transformer <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;onehot&#39;</span>, OneHotEncoder(handle_unknown<span class="op">=</span><span class="st">&#39;ignore&#39;</span>))</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>preprocessor <span class="op">=</span> ColumnTransformer(</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>    transformers<span class="op">=</span>[</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&#39;num&#39;</span>, numeric_transformer, numeric_features),</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>        (<span class="st">&#39;cat&#39;</span>, categorical_transformer, categorical_features)</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>    ])</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Define the model</span></span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>gbr <span class="op">=</span> GradientBoostingRegressor(random_state<span class="op">=</span><span class="dv">42</span>)</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a pipeline</span></span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>model_gbr <span class="op">=</span> Pipeline(steps<span class="op">=</span>[</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;preprocessor&#39;</span>, preprocessor),</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>    (<span class="st">&#39;regressor&#39;</span>, gbr)</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>])</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a><span class="co"># Define parameter grid for GridSearch</span></span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>param_grid <span class="op">=</span> {</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;regressor__n_estimators&#39;</span>: [<span class="dv">100</span>, <span class="dv">200</span>, <span class="dv">300</span>],</span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;regressor__learning_rate&#39;</span>: [<span class="fl">0.01</span>, <span class="fl">0.1</span>, <span class="fl">0.2</span>],</span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>    <span class="st">&#39;regressor__max_depth&#39;</span>: [<span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>]</span>
<span id="cb50-36"><a href="#cb50-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb50-37"><a href="#cb50-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-38"><a href="#cb50-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Perform GridSearchCV</span></span>
<span id="cb50-39"><a href="#cb50-39" aria-hidden="true" tabindex="-1"></a>grid_search <span class="op">=</span> GridSearchCV(model_gbr, param_grid, cv<span class="op">=</span><span class="dv">5</span>, n_jobs<span class="op">=-</span><span class="dv">1</span>, scoring<span class="op">=</span><span class="st">&#39;neg_mean_squared_error&#39;</span>)</span>
<span id="cb50-40"><a href="#cb50-40" aria-hidden="true" tabindex="-1"></a>grid_search.fit(X_train, y_train)</span>
<span id="cb50-41"><a href="#cb50-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-42"><a href="#cb50-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Best model from GridSearch</span></span>
<span id="cb50-43"><a href="#cb50-43" aria-hidden="true" tabindex="-1"></a>best_gbr_model <span class="op">=</span> grid_search.best_estimator_</span>
<span id="cb50-44"><a href="#cb50-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-45"><a href="#cb50-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Predict on the test set</span></span>
<span id="cb50-46"><a href="#cb50-46" aria-hidden="true" tabindex="-1"></a>y_pred_gbr <span class="op">=</span> best_gbr_model.predict(X_test)</span>
<span id="cb50-47"><a href="#cb50-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-48"><a href="#cb50-48" aria-hidden="true" tabindex="-1"></a><span class="co"># Evaluate the model</span></span>
<span id="cb50-49"><a href="#cb50-49" aria-hidden="true" tabindex="-1"></a>mse_gbr <span class="op">=</span> mean_squared_error(y_test, y_pred_gbr)</span>
<span id="cb50-50"><a href="#cb50-50" aria-hidden="true" tabindex="-1"></a>r2_gbr <span class="op">=</span> r2_score(y_test, y_pred_gbr)</span>
<span id="cb50-51"><a href="#cb50-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-52"><a href="#cb50-52" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Gradient Boosting Regressor Mean Squared Error: </span><span class="sc">{</span>mse_gbr<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb50-53"><a href="#cb50-53" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f&quot;Gradient Boosting Regressor R^2 Score: </span><span class="sc">{</span>r2_gbr<span class="sc">}</span><span class="ss">&quot;</span>)</span>
<span id="cb50-54"><a href="#cb50-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-55"><a href="#cb50-55" aria-hidden="true" tabindex="-1"></a><span class="co"># Print out predictions and actual values</span></span>
<span id="cb50-56"><a href="#cb50-56" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">&quot;</span><span class="ch">\n</span><span class="st">Predictions vs Actual:&quot;</span>)</span>
<span id="cb50-57"><a href="#cb50-57" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pred, actual <span class="kw">in</span> <span class="bu">zip</span>(y_pred_gbr, y_test):</span>
<span id="cb50-58"><a href="#cb50-58" aria-hidden="true" tabindex="-1"></a>    <span class="bu">print</span>(<span class="ss">f&quot;Predicted: </span><span class="sc">{</span>pred<span class="sc">:.2f}</span><span class="ss">, Actual: </span><span class="sc">{</span>actual<span class="sc">:.2f}</span><span class="ss">&quot;</span>)</span></code></pre></div>
<div class="output stream stdout">
<pre><code>Gradient Boosting Regressor Mean Squared Error: 24.81369942725451
Gradient Boosting Regressor R^2 Score: -0.0628245384051318

Predictions vs Actual:
Predicted: 21.27, Actual: 20.00
Predicted: 19.38, Actual: 25.00
Predicted: 22.05, Actual: 33.00
Predicted: 19.38, Actual: 20.00
Predicted: 22.96, Actual: 19.00
Predicted: 18.95, Actual: 21.00
Predicted: 18.61, Actual: 18.00
</code></pre>
</div>
</div>
<section id="interpretation-insights-learned" class="cell markdown"
id="RwWLqzXbbNVx">
<h2><strong>Interpretation: Insights Learned</strong></h2>
<p>Insights Model Performance:</p>
<p>The current model using Gradient Boosting Regressor has an MSE of
24.81 and an R² score of -0.06, indicating that it does not perform well
in predicting the coefficients. The negative R² score suggests that the
model is less effective than a simple mean predictor, highlighting the
need for further refinement in the modeling approach. Predictions vs
Actual Values:</p>
<p>The predicted values are not closely aligned with the actual values,
with significant discrepancies observed in several cases. For instance,
a prediction of 22.05 against an actual value of 33.00 indicates a
notable error in the model's output. The inconsistency in predictions
underscores the complexity of the factors influencing the coefficients,
which may not be fully captured by the current features and model. Data
Quality and Completeness:</p>
<p>The dataset contains several missing values, which were handled by
dropping rows with any NaN values. This approach may have led to the
loss of potentially valuable data, affecting the model's performance.
The need for better data imputation strategies is evident to ensure that
all available information is utilized effectively. Feature Importance
and Engineering:</p>
<p>The existing features, though normalized and theoretically relevant,
might not sufficiently capture the nuances of the factors influencing
the coefficients. There is a potential to explore interaction terms,
temporal features, and other domain-specific transformations to enhance
the model's predictive capability. Policy Decisions Data Improvement
Initiatives:</p>
<p>Invest in Comprehensive Data Collection: To improve model accuracy,
it is essential to collect more complete and detailed data. This
includes not only filling gaps in the existing dataset but also
gathering additional relevant metrics that may impact club performance
and coefficients. Adopt Advanced Imputation Techniques: Instead of
dropping rows with missing values, employ sophisticated imputation
methods to retain as much information as possible. Techniques such as
K-Nearest Neighbors (KNN) imputation, iterative imputation, or
domain-specific imputation strategies should be considered. Model
Refinement and Experimentation:</p>
<p>Explore Advanced Modeling Techniques: Beyond Gradient Boosting,
models like XGBoost, LightGBM, Random Forests, and neural networks
should be tested to identify a more accurate predictor. Ensemble methods
could also be leveraged to combine the strengths of multiple models.
Extensive Hyperparameter Tuning: Conduct a broader and more granular
hyperparameter search to optimize the model’s performance. Automated
hyperparameter optimization tools such as Bayesian Optimization or
Random Search can be utilized for this purpose. Integration of Domain
Knowledge:</p>
<p>Engage with Football Analytics Experts: Collaborate with
professionals who have in-depth knowledge of football performance
metrics to identify additional features and factors that may be relevant
for the model. Incorporate Historical and Contextual Data: Including
historical trends, key events (e.g., major player transfers, changes in
management), and contextual factors can provide a richer dataset and
potentially improve model predictions. Strategic Use of Model
Insights:</p>
<p>Informed Resource Allocation: While the current model's predictions
should not be the sole basis for decisions, they can be used in
conjunction with expert opinions to guide resource allocation, such as
investments in player acquisitions or training programs. Enhanced
Decision-Making Processes: Develop data-driven strategies that focus on
improving specific performance metrics identified by the model. For
instance, if certain normalized metrics like SPI Normalized or Pts per
UCL Normalized are found to be influential, targeted efforts can be made
to enhance these areas. Ongoing Model Development and Monitoring:</p>
<p>Continuous Improvement Cycle: Establish a cycle of continuous model
development and evaluation. Regularly update the model with new data,
refine features, and reassess performance to ensure it remains relevant
and accurate. Real-Time Data Integration: Implement systems to integrate
real-time data updates, allowing the model to adapt to the latest
performance metrics and provide up-to-date predictions. Conclusion The
current project has provided valuable insights into the factors
influencing UEFA Champions League coefficients. However, there is a
clear need for further refinement and enhancement of the model to
achieve more accurate and reliable predictions. By investing in data
quality, exploring advanced modeling techniques, and integrating domain
knowledge, we can develop a robust predictive model that offers
actionable insights for strategic decision-making in football
analytics.</p>
</section>
</body>
</html>
